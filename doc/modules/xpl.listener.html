<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/xpl.html">xpl</a>
	</li>

	<li><strong>xpl.listener</strong></li>
	
	<li>
		<a href="../modules/xpllogger.html">xpllogger</a>
	</li>

	<li>
		<a href="../modules/xplsender.html">xplsender</a>
	</li>

</ul>



<!-- File list -->

<h1>Files</h1>
<ul>

	<li>
		<a href="../files/src/xpl/classes/base.html">src/xpl/classes/base.lua</a>
	</li>

	<li>
		<a href="../files/src/xpl/classes/xpldevice.html">src/xpl/classes/xpldevice.lua</a>
	</li>

	<li>
		<a href="../files/src/xpl/classes/xplfilter.html">src/xpl/classes/xplfilter.lua</a>
	</li>

	<li>
		<a href="../files/src/xpl/classes/xplmessage.html">src/xpl/classes/xplmessage.lua</a>
	</li>

	<li>
		<a href="../files/src/xpl/init.html">src/xpl/init.lua</a>
	</li>

	<li>
		<a href="../files/src/xpl/new_device_template.html">src/xpl/new_device_template.lua</a>
	</li>

	<li>
		<a href="../files/src/xpl/xpllistener.html">src/xpl/xpllistener.lua</a>
	</li>

	<li>
		<a href="../files/src/xpllogger.html">src/xpllogger.lua</a>
	</li>

	<li>
		<a href="../files/src/xplsender.html">src/xplsender.lua</a>
	</li>

</ul>






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>xpl.listener</code></h1>

<p></p>






<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#getipaddress">getipaddress</a>&nbsp;()</td>
	<td class="summary">Returns the current IP address in use by the xpllistener </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#getport">getport</a>&nbsp;()</td>
	<td class="summary">Returns the current network port in use by the xpllistener </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#isexiting">isexiting</a>&nbsp;()</td>
	<td class="summary">property indicating whether the xPL listener is running.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#register">register</a>&nbsp;(device)</td>
	<td class="summary">Registered a device/handler to receive incoming messages </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#start">start</a>&nbsp;(hub)</td>
	<td class="summary">Starts the xPL listener loop.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#stop">stop</a>&nbsp;()</td>
	<td class="summary">stops the listener.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#unregister">unregister</a>&nbsp;(device)</td>
	<td class="summary">Unregisters a device/handler from receiving messages.</td>
	</tr>

</table>





<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="getipaddress"></a><strong>getipaddress</strong>&nbsp;()</dt>
<dd>
Returns the current IP address in use by the xpllistener







<h3>Return value:</h3>
<ul>the IP address now used by the listener and to be used in hbeat messages for the 'remote-ip' key.</ul>



</dd>




<dt><a name="getport"></a><strong>getport</strong>&nbsp;()</dt>
<dd>
Returns the current network port in use by the xpllistener







<h3>Return value:</h3>
<ul>the network port now used by the listener and to be used in hbeat messages for the 'port' key.</ul>



</dd>




<dt><a name="isexiting"></a><strong>isexiting</strong>&nbsp;()</dt>
<dd>
property indicating whether the xPL listener is running. Note: this is a field, not a function!







<h3>Return value:</h3>
<ul><code>nil &nbsp:</code> if the listener is not running<br/><code>false:</code> if the listener is running<br/><code>true :</code> if the listener is currently exiting its loop</ul>



</dd>




<dt><a name="register"></a><strong>register</strong>&nbsp;(device)</dt>
<dd>
Registered a device/handler to receive incoming messages


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>device</em></code>: either a function or a table. If its a table then it must contain a function named <code>handlemessage</code>. A function will be called with just a message; <code>handler(message)</code>, a table will be called with the table and the message as in method notation; <code>handler:handlemessage(message)</code>.
	</li>
	
</ul>








</dd>




<dt><a name="start"></a><strong>start</strong>&nbsp;(hub)</dt>
<dd>
Starts the xPL listener loop. This will start the underlying Copas loop, hence this will be blocking! at least one handler or timer must be added before calling start, if not you will have no means of exiting. All handlers registered will get their <code>handler:start()</code> method called.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>hub</em></code>: if true, the hub will started, if false, no hub will be started
	</li>
	
</ul>






<h3>Return value:</h3>
<ul>true after the loop exits or nil and an error message</ul>



</dd>




<dt><a name="stop"></a><strong>stop</strong>&nbsp;()</dt>
<dd>
stops the listener. because the start function is blocking, this can only be called from within a piece of code running within the Copas scheduler. If succesful, the function <code>start()</code> will return, and any code after that statement will continue.









</dd>




<dt><a name="unregister"></a><strong>unregister</strong>&nbsp;(device)</dt>
<dd>
Unregisters a device/handler from receiving messages. If the handler is unknown, no error will be thrown.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>device</em></code>: handler to be unregistered (same as used when calling <code>register()</code>).
	</li>
	
</ul>








</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
